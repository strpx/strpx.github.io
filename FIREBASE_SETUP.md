# ğŸ”¥ Firebase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€å¸­ãã˜å¼•ãã‚¢ãƒ—ãƒªã«Firebaseã‚’çµ±åˆã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ5åˆ†ã§å®Œäº†ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. [Firebase Console](https://console.firebase.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹: `seat-lottery-app`ï¼‰
4. Google Analyticsã¯ä¸è¦ãªã®ã§ã‚ªãƒ•ã«ã—ã¦ã‚‚OK
5. ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—2: Realtime Databaseã®æœ‰åŠ¹åŒ–

1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œæ§‹ç¯‰ã€â†’ã€ŒRealtime Databaseã€ã‚’é¸æŠ
2. ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠï¼ˆ`asia-southeast1` ãªã©ï¼‰
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã¯ã€Œãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹ã€ã‚’é¸æŠ
   - âš ï¸ æœ¬ç•ªç’°å¢ƒã§ã¯å¾Œã§ãƒ«ãƒ¼ãƒ«ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„
5. ã€Œæœ‰åŠ¹ã«ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—3: Firebaseè¨­å®šã®å–å¾—

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆâš™ï¸ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’é–‹ã
2. ã€Œå…¨èˆ¬ã€ã‚¿ãƒ–ã‚’é¸æŠ
3. ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã€Œãƒã‚¤ã‚¢ãƒ—ãƒªã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
4. ã€Œ</>ã€ï¼ˆã‚¦ã‚§ãƒ–ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ã‚¢ãƒ—ãƒªã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ï¼ˆä¾‹: `Seat Lottery Web`ï¼‰
6. ã€ŒFirebase Hostingã‚’è¨­å®šã€ã¯ãƒã‚§ãƒƒã‚¯ä¸è¦
7. ã€Œã‚¢ãƒ—ãƒªã‚’ç™»éŒ²ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
8. è¡¨ç¤ºã•ã‚Œã‚‹ **firebaseConfig** ã‚’ã‚³ãƒ”ãƒ¼

### ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¢ãƒ—ãƒªã«è¨­å®šã‚’è¿½åŠ 

`seat-lottery-firebase.html` ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®éƒ¨åˆ†ã‚’ç·¨é›†ï¼š

```javascript
// Firebaseè¨­å®šï¼ˆã“ã“ã«è‡ªåˆ†ã®Firebaseè¨­å®šã‚’å…¥ã‚Œã‚‹ï¼‰
const firebaseConfig = {
    apiKey: "YOUR_API_KEY",              // â† ã“ã“ã‚’å¤‰æ›´
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
};
```

å®Ÿéš›ã®è¨­å®šä¾‹ï¼š
```javascript
const firebaseConfig = {
    apiKey: "AIzaSyC1234567890abcdefghijklmnopqrst",
    authDomain: "seat-lottery-app.firebaseapp.com",
    databaseURL: "https://seat-lottery-app-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "seat-lottery-app",
    storageBucket: "seat-lottery-app.appspot.com",
    messagingSenderId: "123456789012",
    appId: "1:123456789012:web:abcdef1234567890"
};
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®è¨­å®šï¼ˆé‡è¦ï¼ï¼‰

é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ®µéšã§ã¯ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š

```json
{
  "rules": {
    "sessions": {
      "$sessionId": {
        ".read": true,
        ".write": true
      }
    }
  }
}
```

**æœ¬ç•ªç’°å¢ƒç”¨ã®æ¨å¥¨ãƒ«ãƒ¼ãƒ«**ï¼ˆã‚ˆã‚Šå®‰å…¨ï¼‰ï¼š

```json
{
  "rules": {
    "sessions": {
      "$sessionId": {
        ".read": true,
        ".write": "!data.exists() || (data.exists() && !data.child('status').exists()) || data.child('status').val() === 'active'",
        "name": {
          ".validate": "newData.isString() && newData.val().length <= 100"
        },
        "totalSeats": {
          ".validate": "newData.isNumber() && newData.val() >= 1 && newData.val() <= 100"
        },
        "assignments": {
          "$assignmentId": {
            ".write": true,
            "name": {
              ".validate": "newData.isString() && newData.val().length <= 50"
            },
            "seat": {
              ".validate": "newData.isNumber() && newData.val() >= 1 && newData.val() <= root.child('sessions').child($sessionId).child('totalSeats').val()"
            },
            "timestamp": {
              ".validate": "newData.isNumber()"
            }
          }
        }
      }
    }
  }
}
```

ãƒ«ãƒ¼ãƒ«ã®è¨­å®šæ–¹æ³•ï¼š
1. Firebase Console â†’ Realtime Database â†’ ãƒ«ãƒ¼ãƒ«
2. ä¸Šè¨˜ã®JSONã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ
3. ã€Œå…¬é–‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

## âœ… å‹•ä½œç¢ºèª

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `seat-lottery-firebase.html` ã‚’é–‹ã
2. å³ä¸Šã«ã€Œæ¥ç¶šæ¸ˆã¿ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ãƒ†ã‚¹ãƒˆ
4. åˆ¥ã®ãƒ‡ãƒã‚¤ã‚¹/ãƒ–ãƒ©ã‚¦ã‚¶ã§QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦å‚åŠ 
5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§çµæœãŒåŒæœŸã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã€Œæ¥ç¶šã§ãã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼

**åŸå› 1: Firebaseè¨­å®šãŒé–“é•ã£ã¦ã„ã‚‹**
- `firebaseConfig` ã®å€¤ã‚’å†ç¢ºèª
- ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆãƒŸã‚¹ãŒãªã„ã‹ç¢ºèª

**åŸå› 2: Realtime DatabaseãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„**
- Firebase Consoleã§ã€ŒRealtime Databaseã€ã‚’ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URLãŒè¨­å®šã«å«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**åŸå› 3: ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª**
- F12ã‚­ãƒ¼ã§é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã
- Consoleã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

### ã€Œæ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼

**åŸå› : ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãŒå³ã—ã™ãã‚‹**
- Firebase Console â†’ Realtime Database â†’ ãƒ«ãƒ¼ãƒ«
- ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã®ãƒ«ãƒ¼ãƒ«ã«å¤‰æ›´ï¼ˆä¸Šè¨˜å‚ç…§ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãŒåŒæœŸã•ã‚Œãªã„

**åŸå› 1: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š**
- Wi-Fiã‚„ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿æ¥ç¶šã‚’ç¢ºèª

**åŸå› 2: ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥**
- Ctrl+Shift+Rï¼ˆWindowsï¼‰ã¾ãŸã¯ Cmd+Shift+Rï¼ˆMacï¼‰ã§å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰

## ğŸ“Š Firebase ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
seat-lottery-app (Realtime Database)
â””â”€â”€ sessions/
    â””â”€â”€ ABC123/
        â”œâ”€â”€ name: "æ–°å¹´ä¼š 2025"
        â”œâ”€â”€ totalSeats: 10
        â”œâ”€â”€ createdAt: 1234567890
        â”œâ”€â”€ status: "active"
        â””â”€â”€ assignments/
            â”œâ”€â”€ -NxAbC123/
            â”‚   â”œâ”€â”€ name: "å±±ç”°å¤ªéƒ"
            â”‚   â”œâ”€â”€ seat: 5
            â”‚   â””â”€â”€ timestamp: 1234567890
            â””â”€â”€ -NxAbC456/
                â”œâ”€â”€ name: "ä½è—¤èŠ±å­"
                â”œâ”€â”€ seat: 3
                â””â”€â”€ timestamp: 1234567891
```

## ğŸ’° æ–™é‡‘ã«ã¤ã„ã¦

Firebase Realtime Databaseã®ç„¡æ–™æ ï¼š
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 1GB
- **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**: 10GB/æœˆ
- **åŒæ™‚æ¥ç¶š**: 100æ¥ç¶š

å¸­ãã˜å¼•ãã‚¢ãƒ—ãƒªã®æ¨å®šä½¿ç”¨é‡ï¼š
- 1ã‚»ãƒƒã‚·ãƒ§ãƒ³: ç´„5KB
- 100ã‚»ãƒƒã‚·ãƒ§ãƒ³: ç´„500KB
- æ¥ç¶šæ™‚é–“: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ã¿ï¼ˆæ•°åˆ†ã€œæ•°ååˆ†ï¼‰

**â†’ å°è¦æ¨¡ã€œä¸­è¦æ¨¡ã®ä½¿ç”¨ãªã‚‰ç„¡æ–™æ ã§ååˆ†ã§ã™ï¼**

è©³ç´°: [Firebaseæ–™é‡‘ãƒ—ãƒ©ãƒ³](https://firebase.google.com/pricing)

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. APIã‚­ãƒ¼ã®ç®¡ç†

- `apiKey` ã¯å…¬é–‹ã•ã‚Œã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯Firebase Rulesã§åˆ¶å¾¡ã—ã¾ã™

### 2. ãƒ‡ãƒ¼ã‚¿ã®æœ‰åŠ¹æœŸé™

å¤ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•å‰Šé™¤ã™ã‚‹å ´åˆã¯ã€Cloud Functionsã‚’ä½¿ç”¨ï¼š

```javascript
// functions/index.js
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

exports.cleanupOldSessions = functions.pubsub
  .schedule('every 24 hours')
  .onRun(async (context) => {
    const db = admin.database();
    const now = Date.now();
    const cutoff = now - (7 * 24 * 60 * 60 * 1000); // 7æ—¥å‰
    
    const snapshot = await db.ref('sessions').once('value');
    const updates = {};
    
    snapshot.forEach((child) => {
      if (child.val().createdAt < cutoff) {
        updates[child.key] = null;
      }
    });
    
    return db.ref('sessions').update(updates);
  });
```

### 3. ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ã®é˜²æ­¢

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§å…¥åŠ›å€¤ã‚’æ¤œè¨¼ï¼š
- åå‰ã®é•·ã•åˆ¶é™
- å¸­ç•ªå·ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯
- é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆã‚ˆã‚Šé«˜åº¦ãªãƒ«ãƒ¼ãƒ«ï¼‰

## ğŸš€ ã•ã‚‰ãªã‚‹æ”¹å–„æ¡ˆ

### 1. èªè¨¼ã®è¿½åŠ 

Firebase Authenticationã‚’ä½¿ã£ã¦ï¼š
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆè€…ã®è­˜åˆ¥
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç·¨é›†æ¨©é™ç®¡ç†

### 2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ

Firebase ã®ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆï¼š
```javascript
import { enableNetwork, disableNetwork } from 'firebase/database';

// ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
database.goOffline();

// ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰å¾©å¸°
database.goOnline();
```

### 3. åˆ†ææ©Ÿèƒ½

Firebase Analyticsã‚’è¿½åŠ ï¼š
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæ•°
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
- äººæ°—ã®æ™‚é–“å¸¯

## ğŸ“± ãƒ‡ãƒ—ãƒ­ã‚¤ã‚ªãƒ—ã‚·ãƒ§ãƒ³

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Firebase Hosting

```bash
npm install -g firebase-tools
firebase login
firebase init hosting
firebase deploy
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: GitHub Pages

`seat-lottery-firebase.html` ã‚’ `index.html` ã«ãƒªãƒãƒ¼ãƒ ã—ã¦GitHub Pagesã§å…¬é–‹

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: Netlify/Vercel

ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ç°¡å˜ãƒ‡ãƒ—ãƒ­ã‚¤

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š
1. [Firebase ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://firebase.google.com/docs)
2. [Stack Overflow](https://stackoverflow.com/questions/tagged/firebase)
3. [Firebase ã‚µãƒãƒ¼ãƒˆ](https://firebase.google.com/support)

---

**æ›´æ–°æ—¥**: 2025å¹´10æœˆ25æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
