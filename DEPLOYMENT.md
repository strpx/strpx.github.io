# 🚀 デプロイメントガイド - LocalStorage版

## 📌 重要なお知らせ

公開環境では `/tables/` APIエンドポイントが利用できないため、**LocalStorage版**に切り替えました。

### バージョン選択

- **`index.html`** (推奨): LocalStorage版 - 公開環境で動作
- **`index-with-api.html`**: API版 - 開発環境のみ動作

## ✅ LocalStorage版の特徴

### メリット
✅ サーバー不要で動作  
✅ インターネット接続不要（オフライン対応）  
✅ シンプルで高速  
✅ 同じブラウザの複数タブ間でリアルタイム同期  
✅ セットアップ不要  

### 制限事項
❌ 異なるデバイス間でデータ共有不可  
❌ 異なるブラウザ間でデータ共有不可  
⚠️ ブラウザキャッシュクリアでデータ消失  

## 🚀 デプロイ手順

### 1. Publishタブをクリック

### 2. 公開ボタンを押す

### 3. 公開URLを取得

### 4. 動作確認

```
公開URL にアクセス
↓
セッション作成（例: "テスト", 席数: 5）
↓
セッションIDをコピー
↓
同じブラウザで新しいタブを開く
↓
公開URL にアクセス
↓
セッションIDで参加
↓
両タブでくじを引く
↓
リアルタイム同期を確認 ✅
```

## 💡 使用シナリオ

### シナリオ1: 同じ部屋・同じデバイス
**最適**: 1台のPCやタブレットを回して使用

```
主催者がセッション作成
↓
参加者が順番にデバイスを使用
↓
各自が名前を入力してくじを引く
↓
全員で結果を確認
```

### シナリオ2: 同じ部屋・各自のデバイス（制限あり）
**注意**: 異なるデバイス間では同期しません

```
主催者がセッション作成してIDを共有
↓
各参加者が自分のデバイスでIDを入力
↓
各自がくじを引く
↓
⚠️ 結果は各デバイスに個別保存
↓
主催者が手動で結果を集約する必要あり
```

### シナリオ3: プロジェクター表示
**最適**: 1台のPCで全員が見る

```
主催者がセッション作成
↓
プロジェクターに画面を表示
↓
参加者が代表者に名前を伝える
↓
代表者が入力してくじを引く
↓
全員で結果をリアルタイム確認
```

## 🔧 トラブルシューティング

### Q: 複数デバイスで共有したい

**A**: このLocalStorage版では不可能です。

**代替案**:
1. **1台のデバイスを共有する**（推奨）
2. **主催者が一括で実行**してスクリーンに表示
3. **将来的な対応**: Firebase等の外部DBを使用したバージョンを検討

### Q: データが消えてしまった

**A**: LocalStorageは以下で消えます：
- ブラウザのキャッシュクリア
- プライベートモード終了
- ストレージ容量不足

**対策**:
- 重要なセッションは結果をスクリーンショット保存
- 結果リストをコピー&ペーストでバックアップ

### Q: 別タブで同期されない

**A**: 確認ポイント：
1. **同じブラウザ**: Chrome→Chromeなど
2. **同じセッションID**: 正確にコピー
3. **通常モード**: プライベートモードと通常モードは別
4. **JavaScript有効**: ブラウザ設定を確認

### Q: セッションが見つからない

**A**: チェック項目：
1. セッションIDが正確か（スペース・改行なし）
2. 同じブラウザを使用しているか
3. 通常/プライベートモードが一致しているか

## 📊 対応ブラウザ

### 完全対応
✅ Chrome 4+  
✅ Firefox 3.5+  
✅ Safari 4+  
✅ Edge (全バージョン)  
✅ Opera 10.5+  

### モバイル対応
✅ iOS Safari 3.2+  
✅ Android Browser 2.1+  
✅ Chrome for Android  
✅ Firefox for Android  

## 🎯 推奨利用方法

### 👍 適している使い方

1. **オフラインイベント**
   - インターネットがない会場
   - 1台のデバイスで参加者が順番に使用

2. **小規模ミーティング**
   - 5-10人程度
   - 同じ部屋に集まっている

3. **教室・セミナー**
   - プロジェクター表示
   - 講師が操作

### 👎 適していない使い方

1. **リモート会議**
   - 各自が自宅から参加
   - 複数デバイスでのリアルタイム共有が必要

2. **大規模イベント**
   - 100人以上の参加者
   - 分散環境での使用

3. **長期的なデータ保存**
   - セッション結果を永続的に保存
   - 後日参照する必要がある

## 🔮 将来の改善案

複数デバイス対応が必要な場合の選択肢：

### オプション1: Firebase Realtime Database
- リアルタイム同期
- 無料プランで十分
- セットアップ必要

### オプション2: Supabase
- PostgreSQLベース
- リアルタイム機能あり
- 無料プランあり

### オプション3: PeerJS (P2P)
- サーバー不要
- ブラウザ間で直接通信
- NAT越えの問題あり

### オプション4: WebRTC Data Channel
- 完全P2P
- 低レイテンシ
- 実装が複雑

## 📝 現在の状態まとめ

| 項目 | 状態 |
|------|------|
| 公開環境での動作 | ✅ 動作 |
| セッション作成 | ✅ 動作 |
| くじ引き実行 | ✅ 動作 |
| 同じブラウザでの共有 | ✅ 動作 |
| 異なるデバイスでの共有 | ❌ 非対応 |
| オフライン動作 | ✅ 対応 |
| データ永続性 | ⚠️ ブラウザ依存 |

## ✅ デプロイチェックリスト

デプロイ前：
- [ ] `index.html` がLocalStorage版になっているか確認
- [ ] ブラウザでローカルテスト完了

デプロイ後：
- [ ] 公開URLにアクセス可能
- [ ] セッション作成が動作
- [ ] くじ引きが動作
- [ ] 別タブで同期確認
- [ ] モバイルでの動作確認

---

**バージョン**: 2.0.0 (LocalStorage)  
**最終更新**: 2025年10月25日  
**ステータス**: Production Ready ✅
