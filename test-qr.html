<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRコードテスト</title>
</head>
<body>
    <h1>QRコードテスト</h1>
    
    <h2>方法1: Google Charts API</h2>
    <img id="qr1" alt="QRコード">
    
    <h2>方法2: QRCode.js (unpkg)</h2>
    <canvas id="qr2"></canvas>
    
    <h2>方法3: QRCode.js (jsdelivr)</h2>
    <canvas id="qr3"></canvas>
    
    <h2>方法4: qrcode-generator</h2>
    <div id="qr4"></div>
    
    <script>
        const testUrl = 'https://strpx.github.io/';
        
        // 方法1: Google Charts API
        document.getElementById('qr1').src = `https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl=${encodeURIComponent(testUrl)}`;
        
        console.log('Google Charts QR: OK');
    </script>
    
    <!-- 方法2: unpkg -->
    <script src="https://unpkg.com/qrcode/build/qrcode.js"></script>
    <script>
        if (typeof QRCode !== 'undefined') {
            QRCode.toCanvas(document.getElementById('qr2'), testUrl, {width: 250}, (error) => {
                if (error) console.error('Method 2 error:', error);
                else console.log('Method 2 (unpkg): OK');
            });
        } else {
            console.error('Method 2: QRCode not loaded');
        }
    </script>
    
    <!-- 方法3: jsdelivr -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.js"></script>
    <script>
        setTimeout(() => {
            if (typeof QRCode !== 'undefined') {
                QRCode.toCanvas(document.getElementById('qr3'), testUrl, {width: 250}, (error) => {
                    if (error) console.error('Method 3 error:', error);
                    else console.log('Method 3 (jsdelivr): OK');
                });
            } else {
                console.error('Method 3: QRCode not loaded');
            }
        }, 100);
    </script>
    
    <!-- 方法4: qrcode-generator -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script>
        setTimeout(() => {
            if (typeof qrcode !== 'undefined') {
                const qr = qrcode(0, 'M');
                qr.addData(testUrl);
                qr.make();
                document.getElementById('qr4').innerHTML = qr.createImgTag(4);
                console.log('Method 4 (qrcode-generator): OK');
            } else {
                console.error('Method 4: qrcode-generator not loaded');
            }
        }, 200);
    </script>
</body>
</html>
